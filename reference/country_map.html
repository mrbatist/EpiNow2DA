<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a country map for a single variable. — country_map • EpiNow2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Generate a country map for a single variable. — country_map"><meta property="og:description" content="
This general purpose function can be used to generate a country map for a single variable. It has few defaults but
the data supplied must contain a region_code variable for linking to mapping data. This function requires
the installation of the rnaturalearth package. Status of this function is currently questioning as it is uncertain
if it is in use. Future releases may depreciate it."><meta property="og:image" content="epiforecasts.io/EpiNow2/reference/figures/unnamed-chunk-13-1.png"><meta property="og:image:alt" content="Example estimates produced by EpiNow2 of the reproduction number, cases by date of infection and cases by date of report"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@cmmid_lshtm"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.3.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epiforecasts/EpiNow2" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a country map for a single variable.</h1>
    <small class="dont-index">Source: <a href="https://github.com/epiforecasts/EpiNow2/blob/master/R/map.R" class="external-link"><code>R/map.R</code></a></small>
    <div class="hidden name"><code>country_map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning" class="external-link"><img src="figures/lifecycle-questioning.svg" alt="[Questioning]"></a>
This general purpose function can be used to generate a country map for a single variable. It has few defaults but
the data supplied must contain a <code>region_code</code> variable for linking to mapping data. This function requires
the installation of the <code>rnaturalearth</code> package. Status of this function is currently questioning as it is uncertain
if it is in use. Future releases may depreciate it.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="fu">country_map</span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  country <span class="op">=</span> <span class="cn">NULL</span>,
  variable <span class="op">=</span> <span class="cn">NULL</span>,
  variable_label <span class="op">=</span> <span class="cn">NULL</span>,
  trans <span class="op">=</span> <span class="st">"identity"</span>,
  fill_labels <span class="op">=</span> <span class="cn">NULL</span>,
  scale_fill <span class="op">=</span> <span class="cn">NULL</span>,
  region_col_ne <span class="op">=</span> <span class="st">"provnum_ne"</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>

    <div id="ref-sections">
    <div id="arguments">
    <h2>Arguments</h2>
    

<dl><dt>data</dt><dd><p>Dataframe containing variables to be mapped. Must contain a <code>region_code</code> variable.</p></dd>
</dl><dl><dt>country</dt><dd><p>Character string indicating the name of the country to be mapped.</p></dd>
</dl><dl><dt>variable</dt><dd><p>A character string indicating the variable to map data for. This must be supplied.</p></dd>
</dl><dl><dt>variable_label</dt><dd><p>A character string indicating the variable label to use. If not supplied then the underlying
variable name is used.</p></dd>
</dl><dl><dt>trans</dt><dd><p>A character string specifying the transform to use on the specified metric. Defaults to no
transform ("identity"). Other options include log scaling ("log") and log base 10 scaling
("log10"). For a complete list of options see <code>ggplot2::continous_scale</code>.</p></dd>
</dl><dl><dt>fill_labels</dt><dd><p>A function to use to allocate legend labels. An example (used below) is <code><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">scales::percent</a></code>,
which can be used for percentage data.</p></dd>
</dl><dl><dt>scale_fill</dt><dd><p>Function to use for scaling the fill. Defaults to a custom <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">ggplot2::scale_fill_manual</a></code>, which
expects the possible values to be "Increasing", "Likely increasing", "Likely decreasing", "Decreasing" or "Stable".</p></dd>
</dl><dl><dt>region_col_ne</dt><dd><p>Character string indicating the name of a column in the data returned by
<code><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_states.html" class="external-link">rnaturalearth::ne_states()</a></code> that <code>data$region_code</code> corresponds to. Possibilities include
<code>provnum_ne</code>, <code>name</code>, <code>fips</code> and others and will depend on which country you are mapping.</p></dd>
</dl><dl><dt>...</dt><dd><p>Additional arguments passed to the <code>scale_fill</code> function</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>ggplot2</code> object containing a country map.</p>
    </div>
    </div>

    <div id="examples">
    <h2>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"rnaturalearth"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"scales"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="co"># Example 1</span></span>
<span class="r-in">  <span class="co"># if you know the provnum_ne codes you can use them directly</span></span>
<span class="r-in">  <span class="va">eg_data</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span class="r-in">    variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">      <span class="st">"Increasing"</span>,</span>
<span class="r-in">      <span class="st">"Decreasing"</span>,</span>
<span class="r-in">      <span class="st">"Stable"</span>,</span>
<span class="r-in">      <span class="st">"Likely decreasing"</span>,</span>
<span class="r-in">      <span class="st">"Likely increasing"</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    region_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in">  <span class="co"># make variable a factor so the ordering is sensible</span></span>
<span class="r-in">  <span class="va">eg_data</span><span class="op">$</span><span class="va">variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">eg_data</span><span class="op">$</span><span class="va">variable</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">"Decreasing"</span>, <span class="st">"Likely decreasing"</span>,</span>
<span class="r-in">    <span class="st">"Stable"</span>, <span class="st">"Likely increasing"</span>,</span>
<span class="r-in">    <span class="st">"Increasing"</span></span>
<span class="r-in">  <span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="fu">country_map</span><span class="op">(</span>data <span class="op">=</span> <span class="va">eg_data</span>, country <span class="op">=</span> <span class="st">"Australia"</span>, variable <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Example 2</span></span>
<span class="r-in">  <span class="co"># sometimes it will be more convenient to join your data by name than provnum_ne code:</span></span>
<span class="r-in">  <span class="va">us_data</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span class="r-in">    variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">      <span class="st">"Increasing"</span>,</span>
<span class="r-in">      <span class="st">"Decreasing"</span>,</span>
<span class="r-in">      <span class="st">"Stable"</span>,</span>
<span class="r-in">      <span class="st">"Likely decreasing"</span>,</span>
<span class="r-in">      <span class="st">"Likely increasing"</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    region_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">      <span class="st">"California"</span>,</span>
<span class="r-in">      <span class="st">"Texas"</span>,</span>
<span class="r-in">      <span class="st">"Florida"</span>,</span>
<span class="r-in">      <span class="st">"Arizona"</span>,</span>
<span class="r-in">      <span class="st">"New York"</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in">  <span class="co"># make variable a factor so the ordering is sensible in the legend</span></span>
<span class="r-in">  <span class="va">us_data</span><span class="op">$</span><span class="va">variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">us_data</span><span class="op">$</span><span class="va">variable</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">"Decreasing"</span>, <span class="st">"Likely decreasing"</span>,</span>
<span class="r-in">    <span class="st">"Stable"</span>, <span class="st">"Likely increasing"</span>,</span>
<span class="r-in">    <span class="st">"Increasing"</span></span>
<span class="r-in">  <span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="fu">country_map</span><span class="op">(</span></span>
<span class="r-in">    data <span class="op">=</span> <span class="va">us_data</span>, country <span class="op">=</span> <span class="st">"United States of America"</span>,</span>
<span class="r-in">    variable <span class="op">=</span> <span class="st">"variable"</span>, region_col_ne <span class="op">=</span> <span class="st">"name"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required namespace: rnaturalearth</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The rnaturalearthhires package needs to be installed.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Installing the rnaturalearthhires package.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Installing package into ‘/Users/runner/work/_temp/Library’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> (as ‘lib’ is unspecified)</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in value[[3L]](cond)</span> Failed to install the rnaturalearthhires package.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span>   Please try installing the package for yourself using the following command: </span>
<span class="r-err co"><span class="r-pr">#&gt;</span>      install.packages("rnaturalearthhires", repos = "http://packages.ropensci.org", type = "source")</span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Joel Hellewell, Katharine Sherratt, Katelyn Gostic, Joe Hickson, Hamada S. Badr, Michael DeWitt, EpiForecasts, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '43da981922253a06c4dfab7b53f2410e',
    indexName: 'epinow2',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

